!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";a("./src/main")},{"./src/main":7}],2:[function(a,b,c){"use strict";function d(){f=$("<div/>").attr("id","dpi-test").css({position:"absolute",top:"-100%",left:"-100%",height:"1in",width:"1in",border:"red 1px solid"}),$("body").prepend(f)}function e(a){this.document=a,this._setScreenDPI()}var f;e.prototype._setScreenDPI=function(){if(d(),f[0].offsetWidth!==f[0].offsetHeight)throw new Error("FATAL ERROR: Bad Screen DPI !");this.screenDPI=f[0].offsetWidth},e.prototype.height=function(a){if(!a)throw new Error("Explicit unit for getting document height is required");var b=$("body",this.document).height();return"px"===a?b:"mm"===a?this.px2mm(b):void 0},e.prototype.px2mm=function(a){if(!this.screenDPI)throw new Error("Screen DPI is not defined. Is Display object instantied ?");return 254*a/this.screenDPI},e.prototype.mm2px=function(a){if(!this.screenDPI)throw new Error("Screen DPI is not defined. Is Display object instantied ?");return a*this.screenDPI/254},b.exports=e},{}],3:[function(a,b,c){"use strict";function d(a,b,c,d){this._content=null,this.rank=null,this.format(a),this.orientate(b),void 0!==c&&(this.rank=c),(void 0!==d||null!==d)&&this.content(d)}var e=a("../utils/page-formats"),f=function(){function a(a){this.name="InvalidOrientationLabelError",this.message=a+" is an invalid orientation label !",this.stack=(new Error).stack}return a.prototype=new Error,a}();d.prototype.content=function(a){return void 0===a?this._content:void(this._content=a)},d.prototype.orientate=function(a){var b="string"!=typeof a,c="portrait"!==a.toLowerCase()&&"paysage"!==a.toLowerCase();if(b||c)throw new f(a);this.orientation=a,"portrait"===a?(this.width=this.format()["short"],this.height=this.format()["long"]):(this.width=this.format()["long"],this.height=this.format()["short"])},d.prototype.format=function(a){if(void 0!==a){if(!e[a])throw new Error("Format "+a+" is not supported yet.");return this._format=e[a],this}return this._format},b.exports=d},{"../utils/page-formats":8}],4:[function(a,b,c){"use strict";function d(a,b,c){f=c,this._document=c.getDoc(),this._display=new g(this._document),this._defaultPage=new h(a,b),this._body=this._document.getElementsByTagName("body")}var e,f,g=a("./Display"),h=a("./Page"),i=(a("./paginator/parser"),a("./paginator/errors")),j=i.InvalidPageRankError,k=[];d.prototype.getCurrentPage=function(){return e},d.prototype.getPage=function(a){if(!k.length)throw new Error("Paginator pages length in null. Can't iterate on it.");var b=0>a-1,c=a-1>k.length;if(b||c)throw new j(a);return k[a-1]},d.prototype.getPages=function(){return k},d.prototype.getPrevious=function(){try{return console.log("this.getCurrentPage()",e),this.getPage(this.getCurrentPage().rank-1)}catch(a){return console.error(a.stck),null}},d.prototype.getNext=function(){try{return this.getPage(this.getCurrentPage().rank+1)}catch(a){return null}},d.prototype.gotoPage=function(a){$(a._content).css({display:"block"}),$.each(k,function(b,c){a.rank!==c.rank&&$(c._content).css({display:"none"})}),e=a},d.prototype.getFocusedPageDiv=function(){var a,b=f.selection.getRng().startContainer,c=f.dom.getParents(b,"div",f.getDoc().body);if($.each(c,function(b,c){$(c).attr("data-paginator")&&(a=c)}),a)return a;throw new Error("No parent page found ! You are out of a page.")},d.prototype.gotoFocusedPage=function(){var a=this.getFocusedPageDiv(),b=$(a).attr("data-paginator-page-rank"),c=this.getPage(b);e=c,this.gotoPage(c)},d.prototype.gotoPrevious=function(){return console.info("goto previous page"),this.gotoPage(this.getPrevious())},d.prototype.gotoNext=function(){return console.info("goto next page"),this.gotoPage(this.getNext())},d.prototype.watchPage=function(){},d.prototype._getDocPadding=function(){var a=this;return{top:$(a._body).css("padding-top"),right:$(a._body).css("padding-right"),bottom:$(a._body).css("padding-bottom"),left:$(a._body).css("padding-left")}},d.prototype._getPageInnerHeight=function(){var a=Number(10*this._display.mm2px(this._defaultPage.height)),b=this._getDocPadding(),c=Number(b.top.split("px").join("")),d=Number(b.bottom.split("px").join("")),e=a-c-d;return e-1},d.prototype.init=function(){function a(){return $("div[data-paginator-page-rank]",b._body)}var b=this,c=a(),d=$("<div>");d.attr({"data-paginator":!0,"data-paginator-page-rank":1}).css({"page-break-after":"always",height:b._getPageInnerHeight(),overflow:"hidden"}),c.length||($(this._body).wrapInner(d),c=a()),k=[],$.each(c,function(a,c){k.push(new h(b._defaultPage.format().label,b._defaultPage.orientation,a+1,c))}),console.log(k)},b.exports=d},{"./Display":2,"./Page":3,"./paginator/errors":5,"./paginator/parser":6}],5:[function(a,b,c){"use strict";c.InvalidPageRankError=function(){function a(a){this.name="InvalidPageRankError",this.message=a+" is an invalid page rank",this.stack=(new Error).stack}return a.prototype=new Error,a}()},{}],6:[function(a,b,c){"use strict";b.exports={}},{}],7:[function(a,b,c){"use strict";var d=a("./classes/Paginator"),e=a("./utils/ui");tinymce.PluginManager.add("paginate",function(a){function b(){c||(c=new d("A4","portrait",a),e.appendNavigationButtons(c)),c.init()}var c;a.once("change",function(a){b()}),a.on("init",function(d){b(),a.on("SetContent",function(a){b()}),a.on("NodeChange",function(a){try{c.gotoFocusedPage()}catch(b){console.info("cant go to focused page now"),console.error(b),console.error(b.stack)}})})})},{"./classes/Paginator":4,"./utils/ui":9}],8:[function(a,b,c){"use strict";function d(a,b,c){this.label=a,this["long"]=b,this["short"]=c}var e={A4:{"long":"297","short":"210"}};$.each(e,function(a,b){c[a]=new d(a,b["long"],b["short"])})},{}],9:[function(a,b,c){"use strict";c.appendNavigationButtons=function(a){var b=$("body"),c="<button></button>",d="btn btn-default btn-large glyphicon",e={position:"absolute",right:"25px","z-index":"999"};$(c).css($.extend({top:window.screen.height/2+"px"},e)).addClass(d+" glyphicon-chevron-up").appendTo(b).click(function(){a.gotoPrevious()}),$(c).css($.extend({top:window.screen.height/2+35+"px"},e)).addClass(d+" glyphicon-chevron-down").appendTo(b).click(function(){a.gotoNext()})}},{}]},{},[1]);